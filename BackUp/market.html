<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WorldConflict ‚Äî March√©</title>

  <!-- Variables globales et style du projet -->
  <link rel="stylesheet" href="variables.css">
  <link rel="stylesheet" href="market.css">
</head>
<body>
  <div class="shell">
    <header class="market-header">
      <div>
        <div class="title">March√© ‚Äî WorldConflict</div>
        <div class="muted">Achetez, vendez et consultez les prix du march√© mondial</div>
      </div>

      <div class="header-right">
        <div class="mini">Mode : <strong id="modeLabel">Lecture</strong></div>
        <button id="refreshBtn" class="btn" title="Rafra√Æchir">‚ü≥ Rafra√Æchir</button>
      </div>
    </header>

    <main class="market-wrapper">
      <!-- Catalogue (gauche) -->
      <aside class="panel catalog" aria-label="Catalogue">
        <h3>Catalogue</h3>

        <div class="search">
          <input id="searchInput" placeholder="Rechercher un item..." aria-label="Recherche item">
          <button id="searchBtn" class="btn">Rechercher</button>
        </div>

        <div id="itemList" class="item-list" role="list">
          <!-- Rempli par market.js : liste d'items => chaque item button.data-item -->
          <div class="muted">Chargement des items‚Ä¶</div>
        </div>

        <div style="margin-top:10px" class="actions-row">
          <button id="viewAllBtn" class="btn btn-ghost">Voir tout</button>
        </div>
      </aside>

      <!-- Panneau central : devis + trade -->
      <section class="panel market-panel" aria-label="Panneau du march√©">
        <div class="market-panel-inner">
          <div id="selectedItem" class="selected-item mini">S√©lectionne un item dans la colonne de gauche.</div>

          <form id="quoteForm" class="quote-form" autocomplete="off">
            <label class="field">
              <span class="label">Item</span>
              <input id="itemId" name="itemId" placeholder="ex: oil" required>
            </label>

            <div class="two-cols">
              <label class="field">
                <span class="label">Quantit√©</span>
                <input id="qty" name="qty" type="number" min="1" value="1" required>
              </label>

              <label class="field">
                <span class="label">Pays (facultatif)</span>
                <input id="countryId" name="countryId" placeholder="ex: fra">
              </label>
            </div>

            <div class="quote-row">
              <button id="getQuoteBtn" class="btn btn-primary" type="button">Obtenir un devis</button>
              <div id="quoteResult" class="quote-result muted">‚Äî</div>
            </div>

            <div id="tradeControls" class="trade-controls visually-hidden">
              <div class="two-cols">
                <button id="buyBtn" class="btn btn-success" type="button">Acheter</button>
                <button id="sellBtn" class="btn btn-danger" type="button">Vendre</button>
              </div>
              <div id="tradeMsg" class="muted mini" style="margin-top:8px"></div>
            </div>
          </form>

          <section id="priceBreakdown" class="panel small muted" style="margin-top:12px; padding:10px;">
            <h4>D√©composition du prix</h4>
            <pre id="breakdownPre" class="mini">Aucun devis pour l'instant.</pre>
          </section>
        </div>
      </section>

      <!-- Colonne droite : snapshot & transactions -->
      <aside class="panel trades-panel" aria-label="Derni√®res transactions">
        <h3>March√© ‚Äî Synth√®se</h3>

        <div id="marketSnapshot" class="mini muted" style="margin-bottom:10px">
          Chargement de l'√©tat du march√©‚Ä¶
        </div>

        <h4 style="margin-top:6px">Transactions r√©centes</h4>
        <div id="recentTrades" class="trade-list">
          <div class="muted">Aucune transaction r√©cente.</div>
        </div>

        <div style="margin-top:12px" class="actions-row">
          <button id="viewLedgerBtn" class="btn btn-ghost">Voir le ledger</button>
        </div>
      </aside>
    </main>
  </div>

<nav class="bottom-nav">
  <div class="nav-pill">

    <button id="nav-chat" class="nav-btn active">
      <span class="nav-icon">üí¨</span>
      <span class="nav-label">Chat</span>
    </button>

    <button id="nav-lobby" class="nav-btn">
      <span class="nav-icon">üèõÔ∏è</span>
      <span class="nav-label">Lobby</span>
    </button>

    <button id="nav-notifications" class="nav-btn">
      <span class="nav-icon">üîî</span>
      <span class="nav-label">Notif</span>
    </button>

    <button id="nav-profile" class="nav-btn">
      <span class="nav-icon">üë§</span>
      <span class="nav-label">Profile</span>
    </button>

  </div>
</nav>

  <div id="toast" class="wc-toast visually-hidden" role="status" aria-live="polite"></div>

  <!-- Placeholder JS (r√©ellement impl√©ment√© plus tard) -->
  <script type="module" src="market.js" defer></script>
</body>
</html>
